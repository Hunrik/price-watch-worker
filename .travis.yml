language: node_js
node_js:
- '6'
before_script:
- npm install
script:
- npm run test
- npm run build
before_deploy:
- cp -r node_modules ./dist
- cd dist
deploy:
  provider: lambda
  function_name: shop-parser-production
  role: arn:aws:iam::284590800778:role/deployer
  handler_name: start
  region: eu-central-1
  access_key_id:
    secure: ebWVnfc6mrudq7ahxyPbUfp4T1+lRYJtKk1r/1y++rx2hfWbVPczEN2Evj74hfFMBKajuj+cUtFz3tEG+8c7wa9JGcwUMfOiM4iona9ayGQrsQZWIxq9bU+uDLfrgIGk5M0rSxFTCT9PCd+BlzzQ1X0ho1ACnUXlG3kUK3AZ7bld1teYgNhV9BH0NhebJIa0dTukHStLbt83ie5QZQEjWQTQuCBFc3bEGYfbKfSYR5Ag9xPuQEN8DjeZ2/kz8nzJzLNMkbD3AEBzlDObCphSHurPyGz9L9boMU7bqVM4Y79tAbft2SH0EA4zTdC7YLUHuNrFN4P9sI0p7JvB64G2YohCOkPeL7sD5LbDyg6yfNERE+Awi3sE9znn7487YK8ZLQS4mM4A1CJbXK3sqNKK7lGfkwLXwCPnN7wJGxB1Csyya978rLR0q5k2Hc+AVKMbqhtCF1Z0WdQh5VLFwHXtt14Fsh8y4YOhJX0O6JNEaylUE9CyG1kXuCMjbS/KHID6Tz3w3QGBlXk+BEEOXGlY+G1riTciQE7ndkW4u65qinQWcU0Nf+e/UJ3nFgmu5W/Cl1vFPxOFK4zY7FSPBglhMbAHaC3nw8F4e6YVK9fk94U+YT2IWdxMt9DTtLyM4QrODkXMCUZjaJRp6FLMoWCI6+6/63ruE+RJBx4yQLLTQNQ=
  secret_access_key:
    secure: pbgC2DYgwHMA6VklBCthzgKI8vZBpfwAGwdJRQy783VpxT3nLHNrhQf3qrGqJcK5bmd8gGg3nuuF5SkwMqfVzhbOuCBPaAFhyrKgxXpnPj0CNHHoY0oYXly1R6WVrQkWQ6k2pEMHDhMt7KEGAhTegFdeioHREi5F7H0YyvAZpH2ovhgRkcg9jmyOtYDhIMH8a72LAfmbmvpZ/g4puP/ZUC6gMxpSynZAD86Z9m4h+efXscVvu3Tgcrwqo7ExWpjiSXJU3DVajzoWnCUQsrWOoRIbl0qYZmS3+5LTzd7A1+jxDVUmKMQQY17poIQ8oab+b+L63QTYeYFZ8HKXiuCd4NXLLpi5SYlVti9yGeOw2V/aznFmvO+ig3P/eVH2Wcf8FJ1cgq4I+w9ukRG5YTX+YUOvI+4Ivy/4i74d6uz0hnZPcaJBCtxHpchuu2xVFlXic49sj/4CYesIXvG4gawzLoEUW4PySaxZKsKtMYEqd0YanvwD1UGl3AYzRuMYVYQzDoUFgn1dR53SzORXOYxV7MHf8bEzEstTnnOOb1Hl1fFZO5coh2YZ7Dot/sp4E6UtJap1xJIxDp2IjBxrBMS+5gqjgNcEKvPlCqiE2ADu9vGBmxF0PDPs/2g1NIIb013mqQ08ZhHuxeu9YlHFTcLj8U7LRXcL1/Zco+2rXXar+uY=
  timeout: 300
  memory_size: 256
  runtime: nodejs4.3
cache: yarn
notifications:
  email: false
env:
  global:
  - secure: V5D3o3yQMFF0ymt4lBA6/qkqw2fuDFtnhSpb/Rcl9fhhr6HwxNRGo2puQdMsEIdomZsKvrndbUAP0qYRfF/8WxonR24BIx+4bJYmEYDYxvSdVtvPm9K/LptTXtqP/Ejpr8K4sIZjSalRS79JaTFsvPOCjU4/hZSZrTrvhLk2wHTBOwst4rCN3Kg2de8x+PD6+DQp/ewr477PX7FSm2nNPaPqxZvRALGhnn0g/8xbMfJ289z2nbtfZ1/CnOt55FX1jn1WYYw+GR9Jk4QF9W0Kn2/f7dKnxv88S0exxamfkhzm9JQYzsZMbR5oikOGRAkaGPSLo93bDNPWGAdEB22q/MRKgrJV5b9NqkiiSArTqQbHMzVf4/28lyOD3V1fciLNFUetla3Se9cUyC93+SPESbP/tinZajO6BCEYu/UU8nOUf5SD8TNORFaXq6yi2sdj+p3jZWdvNVA7atglr7/phYExJioB91FwNvVosWKP6Hroatwl+wV6l2jOgJgne7+kfLmlIBNQzBouNUYazETPCjeKXMOzuJ5Q9LrSNfvh5iHyJg+Hz5eKkv8omtxxp8/M8uCRM0FApRq0pQJ6x9bL3z3KiruX4smSXtxWGMtmdaJfF/0AY00mxosAM8aR40ek2XmxBo3pl2AC2NzBnxIaWNcCspDrfaUNmbPjAJsZENs=
  - secure: pgbuTd+sTsbwiI2zOa4PKWEJLgy+iWr4HN2m3MbzK+b0qNhNDiJ8nsetpgXKqg3KwNvKqRwZitNweEk88Wk+It63d+2k8cNni7hYYjT4JES/+eX1gWRkRB5Svg9aELEy7USo20H7e4VsdpF1nqwdhjCQtvwzPs14//O8L7tVgWFN4d6YIDLWlNsHk8w8yKlRsJIAxs0UAlW4uFvUfLyLvQ8mO9HQJxwSiukF0a+31AjDnG8l02yFhX2aoSRjqQqLbrbQqqcueN6semIDM2VWqXfswqUk1x+AQ11dNTWmZko67FEhdxhoFS3rQD+GI7S7Z2F18f90zPFdXU45prZOJmHUrOfQlg4XdtSBNgOyOwgnfM4Jn7uj41lqcU1KUx7dUZdOCv6QuSeZteyBQCMj8MiKEV5iKzajnpiFwgg8XY2ss7ZeGSOpTCcZXWy7rwo4BPXzCNdl3NkztV3HteP/f/Wg367aOcvKDg0XqRxtyi73yJryr86eyDBYbCGV0L9AavDCbTPmbD2BKvYYUnXSDVXB563Lzdd3EtLM5hI0Kpf5W3doFV2D7OPVU/VqnxiTWioUyXPEZsLociTzkt8SL+gnxvdYFDBwf3bNPo4h7mybTo/rdlUEr81getI51AkQmzx5VDhqYMcC6blMDpbCGmAKXA2xrNBxBK92rEsiClg=
  - AWS_REGION=eu-central-1
